<div class="alert alert-warning" role="alert" ng-show="ngCart.getTotalItems() === 0">
    Your cart is empty
</div>


<h3><center>Order Details</center></h3><br>

<div class="table-responsive col-lg-12" ng-show="ngCart.getTotalItems() > 0" id="checkout">

    <table class="table table-striped ngCart">

        <thead>
        <tr>
            <th></th>
            <th></th>
            <th>Quantity</th>
            <th>Amount</th>
            <th>Total</th>
        </tr>
        </thead>
        <tfoot>
        <tr ng-show="ngCart.getTax()">
            <td></td>
            <td></td>
            <td></td>
            <td>Tax ({{ ngCart.getTaxRate() }}%):</td>
            <td>{{ ngCart.getTax() | currency }}</td>
        </tr>
        <tr ng-show="ngCart.getShipping()">
            <td></td>
            <td></td>
            <td></td>
            <td>Shipping:</td>
            <td>{{ ngCart.getShipping() | currency }}</td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td>Total:</td>
            <td>{{ ngCart.totalCost() | currency }}</td>
        </tr>
        </tfoot>
        <tbody>
        <tr ng-repeat="item in ngCart.getCart().items track by $index">
            <td><span ng-click="ngCart.removeItemById(item.getId())" class="glyphicon glyphicon-remove"></span></td>

            <td>{{ item.getName() }}</td>
            <td><span class="glyphicon glyphicon-minus" ng-class="{'disabled':item.getQuantity()==1}"
                      ng-click="item.setQuantity(-1, true)"></span>&nbsp;&nbsp;
                {{ item.getQuantity() | number }}&nbsp;&nbsp;
                <span class="glyphicon glyphicon-plus" ng-click="item.setQuantity(1, true)"></span></td>
            <td>{{ item.getPrice() | currency}}</td>
            <td>{{ item.getTotal() | currency }}</td>
        </tr>
        </tbody>
    </table>
</div>


<!-- shipping -->
<br><h3><center>Address Details</center></h3><br>
<form class="form-horizontal" name="addressform" role="form">
<div class="col-md-4 col-md-offset-2">

      <fieldset>
        <div class="form-group">
          <label class="col-sm-2 control-label" for="textinput">Line 1</label>
          <div class="col-sm-10">
            <input type="text" placeholder="Address Line 1" ng-model="shipping.add1" class="form-control">
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-sm-2 control-label" for="textinput">Line 2</label>
          <div class="col-sm-10">
            <input type="text" placeholder="Address Line 2" ng-model="shipping.add2" class="form-control">
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-sm-2 control-label" for="textinput">City</label>
          <div class="col-sm-10">
            <input type="text" placeholder="City" ng-model="shipping.city" class="form-control">
          </div>
        </div>

      </fieldset>
  </div>
  <div class="col-md-4 form-horizontal">

      <fieldset>
        <div class="form-group">
          <label class="col-sm-2 control-label" for="textinput">State</label>
          <div class="col-sm-4">
            <input type="text" placeholder="State" ng-model="shipping.state" class="form-control">
          </div>

          <label class="col-sm-2 control-label" for="textinput">Zipcode</label>
          <div class="col-sm-4">
            <input type="text" placeholder="Post Code" ng-model="shipping.zip" class="form-control">
          </div>
        </div>


        <div class="form-group">
          <label class="col-sm-2 control-label" for="textinput">Country</label>
          <div class="col-sm-10">
            <input type="text" placeholder="Country" ng-model="shipping.country" class="form-control">
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <div class="pull-right">

              <!-- <button type="submit" class="btn btn-primary" >Save</button> -->
              <!-- <button id="customButton" class="btn btn-primary" ng-class="{disabled: addressform.$valid }" ng-show="ngCart.getTotalItems() > 0">Purchase</button> -->

            </div>
          </div>
        </div>

      </fieldset>

  </div><!-- /.col-lg-12 -->
</form>
<!-- shipping -->

<button id="customButton" ng-show="ngCart.getTotalItems() > 0">Purchase</button>


<script>
  var handler = StripeCheckout.configure({
    key: 'pk_test_6pRNASCoBOKtIshFeQd4XMUh',
    image: '/img/documentation/checkout/marketplace.png',
    token: function(token) {
      // Use the token to create the charge with a server-side script.
      // You can access the token ID with `token.id`


      angular.element( $('#checkout') ).scope().afunc();

    }
  });

  $('#customButton').on('click', function(e) {
    // Open Checkout with further options
    handler.open({
      name: 'Stripe.com',
      description: '2 widgets',
      amount: 2000
    });
    e.preventDefault();
  });

</script>
