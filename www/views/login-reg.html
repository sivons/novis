<div class="container">

<br><br>
<div ng-hide="currentUser">

   <form ng-show="scenario == 'Sign up'" class="form-horizontal">

     <div class="form-group">
     <label for="email" class="col-sm-3 control-label" >Email: </label>
     <div class="col-sm-6">
       <input type="email" id="email" class="form-control" ng-model="user.email" placeholder="Email" />
     </div>
    </div>

    <div class="form-group">
     <label for="username" class="col-sm-3 control-label" >Username: </label>
     <div class="col-sm-6">
       <input type="text" ng-model="user.username" id="username" class="form-control" placeholder="Username"/>
     </div>
    </div>

    <div class="form-group">
      <label for="password" class="col-sm-3 control-label" >Password: </label>
      <div class="col-sm-6">
        <input type="password" ng-model="user.password" id="password" class="form-control" placeholder="Password" />
      </div>
    </div>



    <div class="form-group">
      <div class="col-sm-6 col-sm-offset-3">
        <button class="btn btn-block btn-success form-control" ng-click="signUp(user)">Sign up</button>
      </div>
    </div>

     <div class="form-group">
       <div class="col-sm-6 col-sm-offset-3 text-center">
         <a  href ng-click='scenario="Log in"'>- OR LOG IN - </a>
       </div>
     </div>

   </form>

   <form ng-show="scenario == 'Log in'" name="loginForm" class="form-horizontal">

     <div class="form-group">
      <label for="username" class="col-sm-3 control-label" >Username: </label>
      <div class="col-sm-6">
        <input type="text" ng-model="user.username" id="username" class="form-control" placeholder="Username"/>
      </div>
     </div>


     <div class="form-group">
       <label for="password" class="col-sm-3 control-label" >Password: </label>
       <div class="col-sm-6">
         <input type="password" ng-model="user.password" id="password" class="form-control" placeholder="Password"/>
       </div>
     </div>

    <div class="form-group">
      <div class="col-sm-6 col-sm-offset-3">
        <button class="btn btn-block btn-success form-control" ng-click="logIn(user)">Log in</button>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-6 col-sm-offset-3 text-center">
        <a href ng-click='scenario="Sign up"'>- OR SIGN UP -</a>
      </div>
    </div>


   </form>
 </div>



 <div ng-show="currentUser">
   <div>
     <p>Welcome, {{currentUser.get('username')}} <span class="text-danger" ng-show="currentUser.attributes.isEmployee">(Employee Mode)</span>.
       <span class="badge" style="cursor: pointer;"><span class="danger glyphicon glyphicon-remove" ng-click="logOut(user)"></span></span>
     </p>
   </div>

    <!-- user orders -->
    <div class="col-lg-6 col-lg-offset-3">
    <table class="table table-hover">
      <thead>
        <th>Date</th>
        <th>Total Paid</th>
        <th>Status</th>
        <th>View</th>
        <th ng-show="currentUser.attributes.isEmployee">Order ID</th>
      </thead>
      <tbody>
        <tr ng-repeat="orderInfo in orders" ng-class="{
          warning: orderInfo.attributes.status=='Pending',
          success: orderInfo.attributes.status=='Completed',
          info: orderInfo.attributes.status=='Shipped',
          danger: orderInfo.attributes.status=='Canceled',
        }" id="{{orderInfo.id}}">
          <a href="#">
          <td>{{orderInfo.createdAt | date : short}}</td>

          <td>${{orderInfo.attributes.total}}</td>

          <!-- if not employee, just show status-->
          <td ng-hide="currentUser.attributes.isEmployee">{{orderInfo.attributes.status}}</td>

          <td ng-show="currentUser.attributes.isEmployee">
            <select ng-model="orderInfo.attributes.status" ng-change="changeOrderStatus(orderInfo.id, orderInfo.attributes.status)">
              <option value="Pending">Pending</option>
              <option value="Shipped">Shipped</option>
              <option value="Completed">Completed</option>
              <option value="Canceled">Canceled</option>
            </select>
          </td>

          <td><a href="#/complete/{{orderInfo.id}}">Details</a></td>

          <td ng-show="currentUser.attributes.isEmployee">
            <!-- show phone icon if it's a phone order -->
            <span class="glyphicon glyphicon-earphone" ng-show="orderInfo.attributes.phone_order"></span>
            {{orderInfo.id}}
          </td>
        </a>
        </tr>

      </tbody>
    </table>
    </div>


</div>
